<nav class="sidebar" style="width:260px; padding:1rem; border-right:1px solid #ccc;">

  <!-- Home -->
  <ul>
    <li>ğŸ  <a href="{{ '/' | relative_url }}" {% if page.url == '/' %}style="font-weight:bold"{% endif %}>Home</a></li>
  </ul>

  <!-- Docs -->
  <h3>Documentazione</h3>
  <ul>
    {% assign docs_sorted = site.docs | sort: "order" %}
    {% for doc in docs_sorted %}
      <li>ğŸ“„ <a href="{{ doc.url | relative_url }}" {% if page.url == doc.url %}style="font-weight:bold"{% endif %}>{{ doc.title }}</a></li>
    {% endfor %}
  </ul>

  <!-- Bible -->
  <h3>Bible</h3>
  <ul>
    {% assign bible_docs = site.bible | sort: "order" %}
    {% assign processed_dirs = "" | split: "" %}

    {% for doc in bible_docs %}
      {% assign parts = doc.path | split:"/" %}
      {% assign filename = parts | last %}
      {% assign dir_parts = parts | slice:1, parts.size | slice:0, parts.size-1 %}
      {% assign dir = dir_parts | join:"/" %}

      {% if dir == "" %}
        <!-- documento root -->
        <li>ğŸ“„ <a href="{{ doc.url | relative_url }}" {% if page.url == doc.url %}style="font-weight:bold"{% endif %}>{{ doc.title }}</a></li>
      {% else %}
        <!-- documento in sottocartella -->
        {% unless processed_dirs contains dir %}
          {% assign processed_dirs = processed_dirs | push: dir %}
          <li>ğŸ“ {{ dir | split:"/" | last | capitalize }}
            <ul>
              {% for child in bible_docs %}
                {% assign child_parts = child.path | split:"/" %}
                {% assign child_filename = child_parts | last %}
                {% assign child_dir_parts = child_parts | slice:1, child_parts.size | slice:0, child_parts.size-1 %}
                {% assign child_dir = child_dir_parts | join:"/" %}
                {% if child_dir == dir and child_filename != child | split:"/" | last %}
                  <li>ğŸ“„ <a href="{{ child.url | relative_url }}" {% if page.url == child.url %}style="font-weight:bold"{% endif %}>{{ child.title }}</a></li>
                {% endif %}
              {% endfor %}
            </ul>
          </li>
        {% endunless %}
      {% endif %}

    {% endfor %}
  </ul>

</nav>
